<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Login Page</title>
        <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    </head>
    <body class="min-h-screen flex bg-gray-100">
        <!-- Left side (Login Form) -->
        <div class="flex flex-col justify-center items-center w-1/2 p-8">
            <form id="loginForm" class="bg-white p-8 rounded-lg shadow-lg w-full max-w-md">
                <h2 class="text-2xl font-bold text-center mb-6">Sign in to YourApp</h2>
                <fieldset>
                    <div class="mb-4">
                        <label for="username" class="block text-gray-700 font-semibold mb-2">Username</label>
                        <input name="username" type="text" required class="w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400"/>
                    </div>
                    <div class="mb-4">
                        <label for="password" class="block text-gray-700 font-semibold mb-2">Password</label>
                        <input name="password" type="password" required class="w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400"/>
                    </div>
                    <div class="flex justify-between items-center mb-6">
                        <div class="flex items-center">
                            <input type="checkbox" id="remember" class="mr-2">
                            <label for="remember" class="text-gray-700">Remember me</label>
                        </div>
                        <a href="#" class="text-blue-500 hover:underline">Forgot Password?</a>
                    </div>
                    <div class="flex flex-col">
                        <button type="submit" class="bg-blue-500 text-white py-3 px-4 rounded-lg hover:bg-blue-600">Log in</button>
                    </div>
                    <div class="flex items-center justify-center mt-6">
                        <span class="text-gray-500">Or login with</span>
                    </div>
                    <div class="flex space-x-4 justify-center mt-4">
                        <button class="bg-gray-100 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-200">Google</button>
                        <button class="bg-gray-100 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-200">Apple</button>
                    </div>
                </fieldset>
            </form>
        </div>
    
        <!-- Right side (Image) -->
        <div class="w-1/2">
            <img src="https://res.cloudinary.com/dyi0do0cg/image/upload/v1728457483/difx9zrnht274yupsssp.webp" alt="Login Image" class="w-full h-screen object-cover">
        </div>
    </body>
<script>
  /*  document.getElementById('loginForm').addEventListener('submit',async(e)=>{
        e.preventDefault();
        const formData = new FormData(e.target)
        //console.log('Username:',username)
        console.log(formData)
        try{
            const response = await fetch('/login',{
                method : 'POST',
                body : formData
            })
            if(response.ok){
                const result = await response.json();
                console.log('ok :',result)
            }else{
                console.log("Failed : ",response.statusText)
            }
        }catch(error){
            console.error('Error during Submission',error)
        }
    })*/
    document.getElementById('loginForm').addEventListener('submit', async (e) => {
        e.preventDefault();  // Prevent form from refreshing the page

        const formData = new FormData(e.target);

        const username = formData.get('username');
        const password = formData.get('password');
        console.log('Username:', username);
        console.log('Password:', password);

        try {
            // Making a POST request to /login with the form data
             const response = await fetch('/login', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'  // Set proper content-type for JSON data
                },
                body: JSON.stringify({ username, password })  // Send as JSON string
            });

            if (response.ok) {
                const result = await response.json();
                 window.location.href = 'home.html'
                console.log('Login successful:', result);
            } else {
                console.log("Login failed:", response.statusText);
            }
        } catch (error) {
            console.error('Error during submission:', error);
        }
    });

</script>
</html>